<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Habit Tracker</title>
  <link rel="manifest" href="/manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="MyApp">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      display: flex;
      height: 100vh;
      flex-direction: column;
    }
    header {
      background: #333;
      color: #fff;
      padding: 1em;
      display: flex;
      justify-content: space-around;
    }
    header a {
      color: white;
      text-decoration: none;
      padding: 0 1em;
    }
    main {
      display: flex;
      flex: 1;
    }
    .sidebar {
      width: 250px;
      background: #222;
      color: white;
      padding: 1em;
    }
    .sidebar h2 {
      color: #fff;
    }
    .content {
      display: flex;
      flex: 1;
      padding: 1em;
      gap: 2em;
    }
    .goals-section, .tasks-section {
      flex: 1;
    }
    .goals-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1em;
    }
    .goal-card {
      background: white;
      padding: 1em;
      border: 1px solid #ccc;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    .goal-card img {
      max-width: 60px;
      margin-bottom: 0.5em;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: #fff;
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #ccc;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .completed {
      text-decoration: line-through;
      color: gray;
    }
    input, button {
      padding: 8px;
      margin-top: 10px;
      width: 100%;
    }
  </style>
  <!-- Firebase SDKs -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-app.js";
    import { getFirestore, collection, addDoc, deleteDoc, doc, getDocs, updateDoc } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBstpAtUtpV9JuVqWetD7FhpNDppgAYGCs",
      authDomain: "habit-tracker-7c16d.firebaseapp.com",
      projectId: "habit-tracker-7c16d",
      storageBucket: "habit-tracker-7c16d.appspot.com",
      messagingSenderId: "329214838371",
      appId: "1:329214838371:web:4d50e8ddedffc72defda56",
      measurementId: "G-22KVBFSEL5"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const habitsRef = collection(db, "habits");

    document.addEventListener("DOMContentLoaded", () => {
      const input = document.getElementById("habit-input");
      const list = document.getElementById("habit-list");

      async function renderHabits() {
        const snapshot = await getDocs(habitsRef);
        list.innerHTML = "";
        snapshot.forEach(docSnap => {
          const habit = docSnap.data();
          const li = document.createElement("li");
          li.className = habit.completed ? "completed" : "";

          const text = document.createElement("span");
          text.textContent = habit.name;
          text.onclick = () => toggleHabit(docSnap.id, habit.completed);

          const del = document.createElement("button");
          del.textContent = "Delete";
          del.onclick = () => deleteHabit(docSnap.id);

          li.appendChild(text);
          li.appendChild(del);
          list.appendChild(li);
        });
      }

      async function addHabit() {
        const name = input.value.trim();
        if (name) {
          await addDoc(habitsRef, { name, completed: false });
          input.value = "";
          renderHabits();
        }
      }

      async function toggleHabit(id, currentStatus) {
        await updateDoc(doc(db, "habits", id), { completed: !currentStatus });
        renderHabits();
      }

      async function deleteHabit(id) {
        await deleteDoc(doc(db, "habits", id));
        renderHabits();
      }

      document.getElementById("add-habit-button").addEventListener("click", addHabit);
      renderHabits();
    });
  </script>
</head>
<body>
  <header>
    <a href="index.html">Home</a>
    <a href="calendar.html">Calendar</a>
    <a href="exercise.html">Exercise Plan</a>
    <a href="progress.html">Progress Charts</a>
  </header>
  <main>
    <div class="sidebar">
      <h2>Add Habit</h2>
      <input id="habit-input" type="text" placeholder="Enter new habit" />
      <button id="add-habit-button">Add Habit</button>
    </div>
    <div class="content">
      <div class="goals-section">
        <h2>Goals</h2>
        <div class="goals-grid">
          <div class="goal-card">
            <img src="https://via.placeholder.com/60" alt="Goal 1" />
            <p>Read 30 mins</p>
          </div>
          <div class="goal-card">
            <img src="https://via.placeholder.com/60" alt="Goal 2" />
            <p>Workout</p>
          </div>
          <div class="goal-card">
            <img src="https://via.placeholder.com/60" alt="Goal 3" />
            <p>Meditate</p>
          </div>
          <div class="goal-card">
            <img src="https://via.placeholder.com/60" alt="Goal 4" />
            <p>Drink Water</p>
          </div>
          <div class="goal-card">
            <img src="https://via.placeholder.com/60" alt="Goal 5" />
            <p>Journal</p>
          </div>
          <div class="goal-card">
            <img src="https://via.placeholder.com/60" alt="Goal 6" />
            <p>Stretch</p>
          </div>
          <div class="goal-card">
            <img src="https://via.placeholder.com/60" alt="Goal 7" />
            <p>Sleep 8 hrs</p>
          </div>
          <div class="goal-card">
            <img src="https://via.placeholder.com/60" alt="Goal 8" />
            <p>Clean Room</p>
          </div>
        </div>
      </div>
      <div class="tasks-section">
        <h2>Today's Habits</h2>
        <ul id="habit-list"></ul>
      </div>
    </div>
  </main>
</body>
</html>
